<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学科快回答！</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- 加载中界面 -->
    <div id="loading-screen" class="loading-screen hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loading-text">加载中...</p>
            <p id="loading-library" class="loading-library">正在加载题库...</p>
        </div>
    </div>
    
    <!-- 动态背景元素 -->
    <div class="bg-animation"></div>
    
    <!-- 控制按钮区域 -->
    <div id="control-buttons" class="control-buttons">
        <button id="control-back-btn" class="control-btn hidden" aria-label="返回主菜单">
            <span class="icon-wrap"><i class="fas fa-home control-icon"></i></span>
            <span class="control-text">返回主菜单</span>
        </button>
        <button id="control-clear-btn" class="control-btn hidden" aria-label="清空记录">
            <span class="icon-wrap"><i class="fas fa-trash control-icon"></i></span>
            <span class="control-text">清空记录</span>
        </button>
    </div>
    
    <!-- 通知提示区域 -->
    <div id="notification-container" class="notification-container"></div>
    
    <div id="app">
        <!-- 开始菜单界面 -->
        <div id="start-menu" class="screen fade-transition">
            <div class="card">
                <h1>学科快回答！</h1>
                <div class="version-info">
                    <span class="author">by 晓炙云溪</span>
                    <span class="version-separator">|</span>
                    <span class="version">v1.4.36-build</span>
                </div>
                <p>挑战你的学科知识储备，在限定时间内尽可能回答更多问题！</p>
                
                <div class="button-group">
                    <button id="start-game-btn" class="primary-btn">
                        <i class="fas fa-play"></i> 开始游戏
                    </button>
                    <button id="select-library-btn" class="secondary-btn">
                        <i class="fas fa-book"></i> 选择题库
                    </button>
                    <button id="view-leaderboard-btn" class="secondary-btn">
                        <i class="fas fa-trophy"></i> 查看排行榜
                    </button>
                    <button id="show-instructions-btn" class="secondary-btn">
                        <i class="fas fa-info-circle"></i> 游戏说明
                    </button>
                </div>
                
                <!-- 知识卡片 -->
                <div id="knowledge-card" class="knowledge-card">
                    <h3>知识卡片</h3>
                    <div id="knowledge-content" class="knowledge-content">
                        <p>请先选择一个题库</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 模式选择卡片 -->
        <div id="mode-select-menu" class="screen hidden fade-transition">
            <div class="mode-select-flex">
                <div class="card mode-card">
                    <h2>经典模式</h2>
                    <div class="mode-rule">
                        <span class="mode-desc-title">规则：</span><br>
                        60秒倒计时，答错不扣分。每答一题，倒计时继续。<br>
                        <span class="mode-desc-title">玩法：</span><br>
                        挑战答题速度和准确率，冲击排行榜！
                    </div>
                    <button id="choose-classic-btn" class="primary-btn mode-choose-btn">
                        <i class="fas fa-stopwatch"></i> 进入经典模式
                    </button>
                </div>
                <div class="card mode-card">
                    <h2>无尽模式</h2>
                    <div class="mode-rule">
                        <span class="mode-desc-title">规则：</span><br>
                        初始60秒，每答对+3秒（最多90秒），答错-2秒，题库答完自动重洗继续，提示已完成n轮。<br>
                        <span class="mode-desc-title">玩法：</span><br>
                        挑战极限答题轮数和分数，单独无尽模式排行榜。
                    </div>
                    <button id="choose-endless-btn" class="primary-btn mode-choose-btn">
                        <i class="fas fa-infinity"></i> 进入无尽模式
                    </button>
                </div>
            </div>
            <div class="button-group mode-select-buttons">
                <button id="back-from-mode-btn" class="secondary-btn">
                    <i class="fas fa-arrow-left"></i> 返回
                </button>
            </div>
        </div>
        
        <!-- 题库选择界面 -->
        <div id="library-selector" class="screen hidden fade-transition">
            <div class="card">
                <h2>选择题库</h2>
                <p>当前选择: <span id="current-library-name">加载中...</span></p>
                
                <div id="library-list" class="library-list">
                    <!-- 题库列表将动态生成 -->
                </div>
                
                <div id="local-file-upload" class="file-upload-section">
                    <p>或选择本地题库文件：</p>
                    <div class="upload-area" id="upload-area">
                        <input type="file" id="library-file-input" accept=".json" />
                        <div class="upload-text">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>拖放JSON文件到此处或点击选择</p>
                        </div>
                    </div>
                    <p class="small-text">提示：请在文件选择器中导航到data文件夹</p>
                </div>
                
                <div class="button-group">
                    <button id="back-from-library-btn" class="primary-btn">
                        <i class="fas fa-arrow-left"></i> 返回
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 游戏界面 -->
        <div id="game" class="screen hidden fade-transition">
            <div class="card">
                <div class="status-bar">
                    <div class="status-item">
                        <i class="fas fa-clock"></i> 时间: <span id="time-left">60</span>秒
                    </div>
                    <div class="status-item">
                        <i class="fas fa-scoreboard"></i> 分数: <span id="score-value">0</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-chart-pie"></i> 正确率: <span id="accuracy-display">0/0/0-0%</span>
                    </div>
                    <div class="status-item" id="endless-round-info" style="display:none">
                        <i class="fas fa-redo"></i> 已完成 <span id="endless-round-count">0</span> 轮
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                </div>
                
                <div class="game-content">
                    <div class="question-section">
                        <div id="question-area">
                            <div id="question">问题将在这里显示</div>
                            <div id="options"></div>
                        </div>
                        <div id="feedback" class="hidden"></div>
                    </div>
                    
                    <div class="explanation-section">
                        <div class="card explanation-card">
                            <!-- 解析列表将在这里动态生成 -->
                            <h3>答题记录</h3>
                            <div id="explanation-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 排行榜界面 -->
        <div id="leaderboard-menu" class="screen hidden fade-transition">
            <div class="leaderboard-container">
                <div class="card leaderboard-card">
                    <h2>排行榜</h2>
                    
                    <!-- 排行榜筛选 -->
                    <div class="leaderboard-filter">
                        <label for="leaderboard-mode-filter">模式：</label>
                        <select id="leaderboard-mode-filter">
                            <option value="classic">经典模式</option>
                            <option value="endless">无尽模式</option>
                        </select>
                        <label for="library-filter">题库筛选：</label>
                        <select id="library-filter">
                            <option value="all">所有题库</option>
                        </select>
                    </div>
                    
                    <ul id="leaderboard" class="score-list leaderboard-pretty"></ul>
                </div>
                
                <div class="card explanation-card leaderboard-explanation">
                    <h3>答题解析</h3>
                    <div id="leaderboard-explanation-content">
                        <p>请选择一条记录查看解析</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 游戏结束界面 -->
        <div id="game-over-menu" class="screen hidden fade-transition">
            <div class="card">
                <h2>游戏结束</h2>
                <p id="game-over-mode-tip" class="mode-tip"></p>
                <p>你的最终得分是:</p>
                <p class="final-score" id="final-score">0</p>
                <p id="record-message" class="hidden">恭喜你创造了新纪录！</p>
                <p>答题统计: <span id="quiz-completion-time">0/0/0-0%</span></p>
                <div id="game-over-round-tip" class="game-over-round-tip"></div>
                
                <h3>当前题库排行榜</h3>
                <ul id="game-over-leaderboard" class="score-list leaderboard-pretty"></ul>
                
                <div class="button-group">
                    <button id="restart-game-btn" class="primary-btn">
                        <i class="fas fa-redo"></i> 返回主菜单
                    </button>
                    <button id="clear-records-btn" class="secondary-btn">
                        <i class="fas fa-trash"></i> 清空记录
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 破纪录庆祝弹窗 -->
        <div id="celebration-message" class="celebration hidden">
            恭喜你创造了新纪录！
        </div>
        
        <!-- 游戏说明弹窗 -->
        <div id="instructions-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2>游戏说明</h2>
                <ul>
                    <li>游戏时间为60秒，在限定时间内尽可能回答更多问题</li>
                    <li>题目难度分为4级，难度越高，得分越多：
                        <ul>
                            <li>难度1：3个选项，每题5分</li>
                            <li>难度2：4个选项，每题10分</li>
                            <li>难度3：5个选项，每题15分</li>
                            <li>难度4：6个选项，每题20分</li>
                        </ul>
                    </li>
                    <li>回答正确加分，回答错误不扣分</li>
                    <li>电脑端右侧会显示所有题目的解析记录</li>
                    <li>游戏结束后可以查看自己的排名</li>
                    <li>无尽模式：每答对+3秒（最多90秒），答错-2秒，每答完一轮题库自动重洗继续答题，挑战极限分数和轮数！</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
