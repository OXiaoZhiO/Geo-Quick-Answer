<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学科快回答</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 通知容器 -->
    <div id="notification-container" class="fixed top-4 right-4 z-50"></div>
    
    <!-- 庆祝信息 -->
    <div id="celebration-message" class="hidden">
        <i class="fas fa-trophy"></i>
        <div>新纪录！</div>
        <div>恭喜你创造了当前题库的最高分！</div>
    </div>
    
    <!-- 游戏说明弹窗 -->
    <div id="instructions-modal" class="hidden">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2>游戏说明</h2>
            <p>欢迎参加"学科快回答"挑战！这是一个测试你知识储备和反应速度的游戏。</p>
            <p>游戏规则：</p>
            <ul>
                <li>游戏时间为60秒，在规定时间内尽可能回答更多题目</li>
                <li>每道题有多个选项，选择你认为正确的答案</li>
                <li>不同难度的题目有不同的分值，难度越高分值越高</li>
                <li>回答正确加分，回答错误不扣分</li>
                <li>答题结束后可以查看详细解析和排行榜</li>
            </ul>
            <p>祝你取得好成绩！</p>
        </div>
    </div>
    
    <!-- 主菜单界面 -->
    <div id="start-menu" class="screen">
        <div class="main-card">
            <div class="main-header">
                <h1>学科快回答</h1>
                <p>挑战你的知识极限，测试你的反应速度</p>
            </div>
            
            <div class="main-content">
                <div class="current-library">
                    <div class="text-gray-600">当前题库</div>
                    <div id="current-library-name">加载中...</div>
                </div>
                
                <div class="button-group">
                    <button id="start-game-btn" class="menu-btn primary-btn">
                        <i class="fas fa-play mr-2"></i>开始答题
                    </button>
                    <button id="select-library-btn" class="menu-btn secondary-btn">
                        <i class="fas fa-book mr-2"></i>选择题库
                    </button>
                    <button id="view-leaderboard-btn" class="menu-btn tertiary-btn">
                        <i class="fas fa-chart-line mr-2"></i>排行榜
                    </button>
                </div>
                
                <div class="instructions-section">
                    <button id="show-instructions-btn">
                        <i class="fas fa-info-circle mr-1"></i>游戏说明
                    </button>
                </div>
            </div>
            
            <div class="main-footer">
                知识挑战 &copy; 2023
            </div>
        </div>
    </div>
    
    <!-- 题库选择界面 -->
    <div id="library-selector" class="screen hidden">
        <div class="library-selector-card">
            <div class="library-selector-header">
                <h2>选择题库</h2>
                <button id="back-from-library-btn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="library-list">
                <!-- 题库列表将通过JS动态生成 -->
            </div>
            
            <div id="local-file-upload">
                <div class="custom-upload-area">
                    <i class="fas fa-file-upload"></i>
                    <p>上传本地题库文件</p>
                    <p>支持JSON格式的题库文件</p>
                    <input type="file" id="library-file-input" accept=".json" class="hidden">
                </div>
            </div>
            
            <div style="text-align: center;">
                <button id="back-from-library-btn-text" class="btn secondary-btn">
                    <i class="fas fa-arrow-left mr-2"></i>返回
                </button>
            </div>
        </div>
    </div>
    
    <!-- 游戏界面 -->
    <div id="game" class="screen hidden">
        <div class="game-container">
            <div class="game-header">
                <div class="score-display">
                    <div class="text-gray-600">得分</div>
                    <div id="score-value">0</div>
                </div>
                
                <div class="time-display">
                    <div class="text-gray-600">剩余时间</div>
                    <div class="flex items-center justify-center">
                        <i class="fas fa-clock text-orange-500 mr-2"></i>
                        <div id="time-left">60</div>
                        <div class="text-gray-600 ml-1">秒</div>
                    </div>
                </div>
                
                <div class="accuracy-display">
                    <div class="text-gray-600">正确率</div>
                    <div id="accuracy-display">0/0/0-0%</div>
                </div>
            </div>
            
            <div class="progress-container">
                <div id="progress-fill" class="h-full w-100"></div>
            </div>
            
            <div class="game-card">
                <div id="question" class="text-center">
                    准备开始...
                </div>
                
                <div id="options">
                    <!-- 选项将通过JS动态生成 -->
                </div>
                
                <div id="feedback" class="hidden"></div>
                
                <!-- 游戏中解析容器 -->
                <div class="explanation-section">
                    <div class="explanation-header">答题记录</div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="quit-game-btn" class="btn secondary-btn" onclick="backToMenu()">
                    <i class="fas fa-sign-out-alt mr-2"></i>退出游戏
                </button>
            </div>
        </div>
    </div>
    
    <!-- 游戏结束界面 -->
    <div id="game-over-menu" class="screen hidden">
        <div class="game-over-container">
            <div class="layout-grid">
                <!-- 左侧：得分和排行榜 -->
                <div>
                    <div class="game-over-card">
                        <h2>游戏结束!</h2>
                        
                        <div class="final-score-container">
                            <div class="text-gray-600">你的得分</div>
                            <div id="final-score">0</div>
                            <div id="quiz-completion-time">0/0/0-0%</div>
                        </div>
                        
                        <div id="record-message" class="hidden">
                            <i class="fas fa-medal mr-2"></i>恭喜！你创造了当前题库的新纪录！
                        </div>
                        
                        <div class="leaderboard-section">
                            <h3>当前题库排行榜</h3>
                            <ul id="game-over-leaderboard" class="leaderboard-list">
                                <!-- 排行榜将通过JS动态生成 -->
                            </ul>
                        </div>
                    </div>
                    
                    <!-- 按钮卡片 -->
                    <div class="button-card">
                        <div class="game-over-buttons">
                            <button id="back-to-menu-btn" class="btn primary-btn">
                                <i class="fas fa-home mr-2"></i>返回主菜单
                            </button>
                            <button id="restart-game-btn" class="btn secondary-btn">
                                <i class="fas fa-redo mr-2"></i>再玩一次
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧：解析卡片 -->
                <div>
                    <div class="explanation-card">
                        <div id="game-over-explanation" class="explanation-container">
                            <div class="explanation-header">本次答题解析</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 排行榜界面 -->
    <div id="leaderboard-menu" class="screen hidden">
        <div class="leaderboard-container">
            <div class="layout-grid">
                <!-- 左侧：排行榜 -->
                <div>
                    <div class="leaderboard-card">
                        <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                            <h2 style="margin: 0;">排行榜</h2>
                            <div class="library-filter-container" style="margin-left: 20px;">
                                <select id="library-filter">
                                    <option value="all">所有题库</option>
                                    <!-- 选项将通过JS动态生成 -->
                                </select>
                            </div>
                        </div>
                        
                        <ul id="leaderboard" class="leaderboard-list">
                            <!-- 排行榜将通过JS动态生成 -->
                        </ul>
                    </div>
                    
                    <!-- 按钮卡片 -->
                    <div class="button-card">
                        <div class="leaderboard-buttons">
                            <button id="back-to-menu-btn" class="btn primary-btn">
                                <i class="fas fa-home mr-2"></i>返回主菜单
                            </button>
                            <button id="clear-leaderboard-btn" class="btn danger-btn">
                                <i class="fas fa-trash mr-2"></i>清空排行榜
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧：解析卡片 -->
                <div>
                    <div class="explanation-card">
                        <div id="leaderboard-explanation" class="explanation-container">
                            <div class="explanation-header">答题解析</div>
                            <div class="empty-state">选择一条记录查看详细解析</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
